# Global Claude Code Instructions

## Workflow Preferences

- **auto-git-workflow**: Always use the `/git-workflow` skill (not manual git commands) for feature branch work. Follow the skill step-by-stepâ€”every phase is mandatory. Complete phases without pausing for explicit user prompts.
- **auto-cleanup-after-merge**: After merging a PR (whether user merges or Claude merges), automatically clean up local git: checkout main, pull, delete merged feature branches.

## Development Conventions

- **Playwright screenshots**: Always use `downloadsDir: "/tmp"` when taking screenshots to avoid polluting ~/Downloads

## Skills Editing Workflow

When editing skills in `~/.claude/skills/`:
1. Skills are stored in a git repo (dotfiles)
2. After editing, commit changes: `cd ~/.claude/skills && git add . && git commit -m "Update {skill-name}: {description}"`
3. Push to remote: `git push`

## Validate User Assumptions

When user references specific files/repos by name:
1. Search to verify they exist
2. If found in different locations than stated, mention it: "I found X in {actual} instead of {stated}"
3. If not found where stated, ask for clarification before proceeding

## Research Before Implementing

When asked to add a pattern/feature:
1. Search for existing examples (Glob/Grep)
2. Read 2-3 examples to understand the pattern
3. Read target file to understand structure
4. Make comprehensive updates (not just minimum)
5. Only ask if pattern is unclear or examples conflict

## Architecture Review

Projects may have an **ARCHITECTURE.md** file (generated by `/establish-ai`) that documents design philosophy, core principles, and patterns. When working on non-trivial projects:

1. Check for ARCHITECTURE.md at project root or in docs/
2. Read it before making architectural changes
3. Use the **architecture-astronaut** agent for code structure reviews, integration planning, or evaluating architectural decisions
4. Update ARCHITECTURE.md when making significant architectural changes

The architecture-astronaut agent enforces principles like "downstream services own their domain" and ensures clean separation of concerns across service boundaries.
